<!DOCTYPE html>
<html lang="en">
<head>
<title>QA</title>
<meta charset = "UTF-8" />
<meta name="keywords" content="quiz,game, api" />
<script src="js/jquery.min.js"></script>
 <script src="js/bootstrap.min.js"></script>
<link href="css/bootstrap.min.css" rel="stylesheet" />
<link href="css/custom.css" rel="stylesheet" />


</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>QA - Quize App Using  The Trivia API</h1>
         </div>
         <div class="row">
          <div class="col-md-10">
            <form id='form'>
                <label></label>
                <textarea id='question' placeholder='location' class="form-control" cols="100px" rows="5px"></textarea><br/><br/>
                <label id='opt' ></label>

            </form>
        </div>
        <div class="col-md-2">

          <span id="score" class>Score: 0</span>

        </div>
    </div>
</div>


<script>
APP={};
APP.score=0;
APP.choice="";

$(document).ready(function(){

  doAjax();

});


function randomKey(obj)
{

 	 key=Object.keys(obj);
 	if(APP.score%3==Math.floor(Math.random()*2))
 	{
 	  key=key.sort()
 	}else
 	{

 	if(APP.score%3==Math.floor(Math.random()*3))
 	 key=key.reverse()
	}

	return key

}

function doAjax()
{
	$.ajax({
	//url:'https://api.openweathermap.org/data/2.5/weather?id=524901&appid=2193e25191cdc18313848771754fd8d5',
	url: 'https://the-trivia-api.com/v2/questions',
	type:'GET',
	success:function(result){


					 options={'_one':result[0].correctAnswer,'_two':result[0].incorrectAnswers[0],'_three':result[0].incorrectAnswers[1],'_four':result[0].incorrectAnswers[2]};

				     key=randomKey(options);

				   for(i=0;i<key.length;i++){

					        document.querySelector('#question').value=result[0].question.text;
					        document.querySelector('#question').disabled=true;
					        document.querySelector('#question').style.backgroundColor="#fff";


				            div=document.createElement('div');
				            div.id='option';
                            document.getElementById('opt').appendChild(div);
							input=document.createElement('input');
							label=document.createElement('label');
							id=document.createAttribute('id');
							id.value='opt';
							label.setAttributeNode(id);

							label.innerText=options[key[i]];
							input.value=options[key[i]];
							input.type='radio';
							label.appendChild(input)


							att=document.createAttribute('class');
							nam=document.createAttribute('name');
							nam.value='_one';
							att.value='radio_option';
							label.setAttributeNode(att);
							input.setAttributeNode(nam);

							input.addEventListener('click',function(){

							APP.choice=this.value;





							});
							document.getElementById('option').appendChild(input);
							document.getElementById('option').appendChild(label);
							document.getElementById('option').appendChild(document.createElement('br'));
							document.getElementById('option').appendChild(document.createElement('br'));


					}
						submit=document.createElement('submit');
						submitatt=document.createAttribute('class');
						submitatt.value="btn btn-primary";
						submit.setAttributeNode(submitatt);
						submit.appendChild(document.createTextNode('Next >>'));

						submit.addEventListener('click',function(){
                        document.getElementById('opt').removeChild(document.getElementById('option'));


							if(APP.choice.toUpperCase()==result[0].correctAnswer.toUpperCase())
							{

							APP.score+=1;
                            document.querySelector('span').innerHTML="Score: "+APP.score;

							}
						  doAjax();

						});


						document.getElementById('option').appendChild(submit);


			 },
	error: function(error){
			console.log(error);
			}



	});










}





</script>
</body>
</html>